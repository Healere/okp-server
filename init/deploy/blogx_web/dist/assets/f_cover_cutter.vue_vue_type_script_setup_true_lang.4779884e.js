import{d as f,q as g,o as v,c as h,w,y as _,u as y,M as l,al as E}from"./index.b57f2f57.js";import{I as b,i as x}from"./image_api.1314f2b6.js";function C(i,n){var e=document.createElement("script"),s=document.getElementsByTagName("head")[0];e.type="text/javascript",e.charset="UTF-8",e.src=i,e.addEventListener?e.addEventListener("load",function(){n()},!1):e.attachEvent&&e.attachEvent("onreadystatechange",function(){var c=window.event.srcElement;c.readyState=="loaded"&&n()}),s.appendChild(e)}const S=f({__name:"f_cover_cutter",props:{rate:{}},emits:["ok"],setup(i,{emit:n}){const e=g(),s=n,c=i;async function u(o){if(!e.siteInfo.qiNiu.enable){const r=await x(o.file);if(r.code){l.error(r.msg);return}l.success(r.msg),s("ok",r.data);return}const t=await E();if(t.code){l.error(t.msg);return}C("/js/qiniu.min.js",()=>{d(o.file,t.data)})}function d(o,t){const r={next(a){console.log("next:",a)},error(a){console.log("error:",a)},complete(a){console.log("complete:",a),s("ok",t.url)}},p={useCdnDomain:!0,region:t.region},m={};qiniu.upload(o,t.key,t.token,m,p).subscribe(r)}return(o,t)=>(v(),h(y(b),{quality:0,originalGraph:"",toolBoxOverflow:!1,onCutDown:u,rate:c.rate},{open:w(()=>[_(o.$slots,"default")]),_:3},8,["rate"]))}});export{S as _};
