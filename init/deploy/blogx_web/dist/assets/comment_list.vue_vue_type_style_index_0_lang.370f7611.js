import{a as q,b as z}from"./comment_api.9cd7d251.js";import"./date.5a421098.js";import{d as U,a as k,b as v,k as E,r as i,o as c,e as d,h as g,f as u,w as p,c as F,i as h,j as M,M as f,m as V,F as R,g as j,y as D}from"./index.b57f2f57.js";const I={class:"comment_list_com"},P={class:"actions"},S={class:"comment_list"},T={class:"item"},$={class:"check"},G={key:0,class:"page"},Q=U({__name:"comment_list",props:{type:{}},setup(x,{expose:C}){const _=M(),o=k({list:[],count:0}),n=k({type:x.type,limit:10}),s=v([]),r=v(!1);async function l(){r.value=!0,o.list=[];const t=await q(n);if(t.code){f.error(t.msg),r.value=!1;return}o.count=t.data.count,o.list=t.data.list,r.value=!1}l();async function b(){(await Promise.all(s.value.map(e=>z(e)))).forEach(e=>{if(e.code){f.error(e.msg);return}f.success(e.msg)}),s.value=[],l()}async function w(t){if(t){s.value=o.list.map(m=>m.id);return}s.value=[]}const y=v(!1);return E(()=>_.query.key,()=>{_.query.key&&(n.key=_.query.key,l())}),C({getData:l}),(t,e)=>{const m=i("a-checkbox"),L=i("a-button"),A=i("a-checkbox-group"),B=i("a-spin"),N=i("a-pagination");return c(),d("div",I,[g("div",P,[u(m,{modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=a=>y.value=a),onChange:w},{default:p(()=>e[3]||(e[3]=[V("\u5168\u9009")])),_:1},8,["modelValue"]),s.value.length?(c(),F(L,{key:0,onClick:b,type:"primary",status:"danger",size:"mini"},{default:p(()=>e[4]||(e[4]=[V("\u5220\u9664 ")])),_:1})):h("",!0)]),g("div",S,[u(B,{style:{width:"100%"},loading:r.value},{default:p(()=>[u(A,{modelValue:s.value,"onUpdate:modelValue":e[1]||(e[1]=a=>s.value=a)},{default:p(()=>[(c(!0),d(R,null,j(o.list,a=>(c(),d("div",T,[g("div",$,[u(m,{value:a.id},null,8,["value"])]),D(t.$slots,"default",{item:a})]))),256))]),_:3},8,["modelValue"])]),_:3},8,["loading"]),o.list.length?(c(),d("div",G,[u(N,{total:o.count,"show-total":"",current:n.page,"onUpdate:current":e[2]||(e[2]=a=>n.page=a),"page-size":n.limit,onChange:l},null,8,["total","current","page-size"])])):h("",!0)])])}}});export{Q as _};
