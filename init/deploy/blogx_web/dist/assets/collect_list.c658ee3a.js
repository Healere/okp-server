import{d as $,a as w,b as D,r as g,o as n,e as p,f as u,w as l,i as M,c as k,h as r,F as V,g as E,j as A,M as f,m as C,n as S,u as m,t as y,p as U}from"./index.b57f2f57.js";import{u as j}from"./user_base_store.744befab.js";import{_ as z}from"./f_article_list.vue_vue_type_style_index_0_lang.cee58350.js";import{F as N}from"./f_a.a86d598e.js";import{_ as O,c as T,a as G,b as H}from"./f_collect_form_modal.vue_vue_type_script_setup_true_lang.83acb97e.js";import"./article_api.d25b0d15.js";import"./go_router.d8eedbce.js";import"./date.5a421098.js";import"./_plugin-vue_export-helper.cdc0426e.js";const J={class:"f_category_list_com"},K={key:0,class:"add"},P={class:"list"},Q=["onClick"],W=["onClick"],X=$({__name:"f_collect_list",props:{userId:{},isMe:{type:Boolean}},setup(I){const i=A(),c=I,_=w({list:[],count:0});async function d(){const s=await T({userID:c.userId,type:2});if(s.code){f.error(s.msg);return}_.list=s.data.list,_.count=s.data.count}const e=w({id:0,title:"",abstract:""}),a=D(!1);function B(){e.id=0,e.title="",e.abstract="",a.value=!0}function F(s){e.id=s.id,e.title=s.title,e.abstract=s.abstract,a.value=!0}D();async function q(s){const o=await G([s.id]);if(o.code){f.error(o.msg);return}f.success(o.msg),d()}function h(s){const o=Number(i.query.collectID);let v=s.id;o===s.id&&(v=-1),U.push({name:i.name,query:{...i.query,collectID:v},params:i.params})}return d(),(s,o)=>{const v=g("icon-plus"),L=g("a-button"),x=g("a-typography-text"),R=g("a-trigger");return n(),p("div",J,[c.isMe?(n(),p("div",K,[u(L,{long:"",type:"outline",onClick:B},{icon:l(()=>[u(v)]),default:l(()=>[o[3]||(o[3]=C(" \u521B\u5EFA "))]),_:1})])):M("",!0),c.isMe?(n(),k(O,{key:1,onOk:d,id:e.id,title:e.title,"onUpdate:title":o[0]||(o[0]=t=>e.title=t),abstract:e.abstract,"onUpdate:abstract":o[1]||(o[1]=t=>e.abstract=t),visible:a.value,"onUpdate:visible":o[2]||(o[2]=t=>a.value=t)},null,8,["id","title","abstract","visible"])):M("",!0),r("div",P,[(n(!0),p(V,null,E(_.list,t=>(n(),p("div",{class:S(["item",{active:t.id===Number(m(i).query.collectID)}])},[c.isMe?(n(),k(R,{key:0,"content-class":"category_trigger",trigger:"contextMenu","align-point":""},{content:l(()=>[r("div",{class:"item",onClick:b=>F(t)},"\u7F16\u8F91",8,Q),r("div",{class:"item delete",onClick:b=>q(t)},"\u5220\u9664",8,W)]),default:l(()=>[u(N,{onClick:b=>h(t)},{default:l(()=>[r("span",null,[u(x,{ellipsis:{css:!0,rows:1}},{default:l(()=>[C(y(t.title),1)]),_:2},1024)]),r("span",null,y(t.articleCount),1)]),_:2},1032,["onClick"])]),_:2},1024)):(n(),k(N,{key:1,onClick:b=>h(t)},{default:l(()=>[r("span",null,[u(x,{ellipsis:{css:!0,rows:1}},{default:l(()=>[C(y(t.title),1)]),_:2},1024)]),r("span",null,y(t.articleCount),1)]),_:2},1032,["onClick"]))],2))),256))])])}}});const Y={class:"user_article_list_view"},nt=$({__name:"collect_list",setup(I){const i=j(),c=A(),_=D();async function d(e){const a=await H({articleIDList:e,collectID:Number(c.query.collectID)});if(a.code){f.error(a.msg);return}f.success(a.msg),_.value.getData()}return(e,a)=>(n(),p("div",Y,[u(X,{"user-id":Number(m(c).params.id),"is-me":m(i).isMe},null,8,["user-id","is-me"]),u(z,{ref_key:"fArticleListRef",ref:_,onDispatchDelete:d,"is-check":m(i).isMe&&m(c).query.collectID>0},null,8,["is-check"])]))}});export{nt as default};
