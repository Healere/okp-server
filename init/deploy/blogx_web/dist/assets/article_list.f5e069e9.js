import{_ as h}from"./f_list.vue_vue_type_style_index_0_lang.88239f5f.js";import{h as U,o as $,e as M}from"./article_api.d25b0d15.js";import{c as O}from"./options.22e943c4.js";import{_ as E}from"./f_user.vue_vue_type_style_index_0_lang.5c31c141.js";import{d as R,b as v,a as D,r as l,o as r,e as _,f as u,w as a,u as S,M as d,m,t as c,F as j,g as q,c as p,i as B,h as z,a6 as G}from"./index.b57f2f57.js";import"./date.5a421098.js";const H={key:1},Z=R({__name:"article_list",setup(J){const F=[{title:"ID",dataIndex:"id"},{title:"\u6587\u7AE0\u6807\u9898",dataIndex:"title"},{title:"\u53D1\u5E03\u7528\u6237",slotName:"user"},{title:"\u6587\u7AE0\u5C01\u9762",slotName:"cover"},{title:"\u6D4F\u89C8\u91CF",dataIndex:"lookCount"},{title:"\u8BC4\u8BBA\u6570",dataIndex:"commentCount"},{title:"\u70B9\u8D5E",dataIndex:"diggCount"},{title:"\u6536\u85CF",dataIndex:"collectCount"},{title:"\u662F\u5426\u5F00\u542F\u8BC4\u8BBA",dataIndex:"openComment",type:"switch"},{title:"\u72B6\u6001",dataIndex:"status",type:"options",options:O},{title:"\u5206\u7C7B",slotName:"category"},{title:"\u6587\u7AE0\u7F6E\u9876",slotName:"adminTop"},{title:"\u53D1\u5E03\u65F6\u95F4",dataIndex:"createdAt",type:"date"},{title:"\u6700\u540E\u66F4\u65B0\u65F6\u95F4",dataIndex:"updateAt",type:"date",dateFormat:"current"},{title:"\u64CD\u4F5C",slotName:"action"}],f=v(!1),g=v(),o=D({id:0,createdAt:"",updatedAt:"",title:"",abstract:"",content:"",tagList:[],cover:"",userID:0,lookCount:0,diggCount:0,commentCount:0,collectCount:0,openComment:!1,status:0,username:"",nickname:"",userAvatar:"",isDigg:!1,isCollect:!1});async function y(n){if(n.id!==o.id){const e=await U(n.id);if(e.code){d.error(e.msg);return}Object.assign(o,e.data)}f.value=!0}const i=D({articleID:0,status:3,msg:""});async function x(){if(o.status!=2)return!0;i.articleID=o.id;const n=await $(i);return n.code?(d.error(n.msg),!1):(d.success(n.msg),g.value.getList(),!0)}async function k(n){if(n.status!==3){d.warning("\u53EA\u80FD\u7F6E\u9876\u5DF2\u53D1\u5E03\u7684\u6587\u7AE0"),n.adminTop=!n.adminTop;return}const e=await G({articleID:n.id,type:2});if(e.code){d.error(e.msg);return}d.success(e.msg)}return(n,e)=>{const s=l("a-form-item"),b=l("a-tag"),A=l("a-radio"),I=l("a-radio-group"),V=l("a-textarea"),T=l("a-form"),N=l("a-modal"),w=l("a-image"),L=l("a-switch");return r(),_("div",null,[u(N,{visible:f.value,"onUpdate:visible":e[2]||(e[2]=t=>f.value=t),title:"\u6587\u7AE0\u5BA1\u6838","on-before-ok":x,"modal-class":"article_examine_modal"},{default:a(()=>[u(T,null,{default:a(()=>[u(s,{label:"\u6587\u7AE0\u6807\u9898"},{default:a(()=>[m(c(o.title),1)]),_:1}),u(s,{label:"\u6587\u7AE0\u7B80\u4ECB"},{default:a(()=>[m(c(o.abstract),1)]),_:1}),u(s,{label:"\u53D1\u5E03\u7528\u6237"},{default:a(()=>[u(E,{nickname:o.nickname,avatar:o.userAvatar},null,8,["nickname","avatar"])]),_:1}),u(s,{label:"\u6587\u7AE0\u5206\u7C7B"},{default:a(()=>[m(c(o.categoryTitle),1)]),_:1}),u(s,{label:"\u6587\u7AE0\u6807\u7B7E"},{default:a(()=>[(r(!0),_(j,null,q(o.tagList,t=>(r(),p(b,{style:{"margin-right":"10px"}},{default:a(()=>[m(c(t),1)]),_:2},1024))),256))]),_:1}),u(s,{label:"\u6587\u7AE0\u6B63\u6587"},{default:a(()=>[m(c(o.content),1)]),_:1}),o.status===2?(r(),p(s,{key:0,label:"\u5BA1\u6838"},{default:a(()=>[u(I,{modelValue:i.status,"onUpdate:modelValue":e[0]||(e[0]=t=>i.status=t)},{default:a(()=>[u(A,{value:3},{default:a(()=>e[3]||(e[3]=[m("\u5BA1\u6838\u901A\u8FC7")])),_:1}),u(A,{value:4},{default:a(()=>e[4]||(e[4]=[m("\u5BA1\u6838\u4E0D\u901A\u8FC7")])),_:1})]),_:1},8,["modelValue"])]),_:1})):B("",!0),i.status===4?(r(),p(s,{key:1,label:"\u62D2\u7EDD\u539F\u56E0"},{default:a(()=>[u(V,{modelValue:i.msg,"onUpdate:modelValue":e[1]||(e[1]=t=>i.msg=t),placeholder:"\u62D2\u7EDD\u539F\u56E0"},null,8,["modelValue"])]),_:1})):B("",!0)]),_:1})]),_:1},8,["visible"]),u(h,{ref_key:"fListRef",ref:g,onEdit:y,"no-add":"",url:S(M),"default-params":{type:3},columns:F},{cover:a(({record:t})=>[t.cover?(r(),p(w,{key:0,src:t.cover,height:"50px"},null,8,["src"])):(r(),_("span",H,"-"))]),user:a(({record:t})=>[u(E,{nickname:t.userNickname,avatar:t.userAvatar},null,8,["nickname","avatar"])]),category:a(({record:t})=>[z("span",null,c(t.categoryTitle?t.categoryTitle:"-"),1)]),adminTop:a(({record:t})=>[u(L,{modelValue:t.adminTop,"onUpdate:modelValue":C=>t.adminTop=C,onChange:C=>k(t)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1},8,["url"])])}}});export{Z as default};
