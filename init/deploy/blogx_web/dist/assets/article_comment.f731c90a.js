import{d as E,a as V,b as D,r as l,o as p,e as d,f as n,w as a,h as o,u as c,t as u,i as m,m as _,l as $,M as f}from"./index.b57f2f57.js";import{a as N}from"./date.5a421098.js";import{F as R}from"./f_a.a86d598e.js";import{_ as T,a as U}from"./options.22e943c4.js";import{_ as z}from"./comment_list.vue_vue_type_style_index_0_lang.370f7611.js";import{c as K}from"./comment_api.9cd7d251.js";import{g as C,a as h}from"./go_router.d8eedbce.js";import"./_plugin-vue_export-helper.cdc0426e.js";const M={class:"article_comment_view"},L={class:"user"},S={class:"info"},H={class:"nickname"},O=["onClick"],j={key:0},q={key:1,class:"article"},G={class:"content"},J={class:"data"},P={class:"date"},Q={class:"digg"},W={key:0,class:"cover"},X=["onClick","src"],ie=E({__name:"article_comment",setup(Y){const r=V({articleID:0,parentID:0,content:""}),v=D();async function g(i){if(r.articleID=i.articleID,r.parentID=i.id,r.content.trim()===""){f.warning("\u8BF7\u8F93\u5165\u56DE\u590D\u5185\u5BB9");return}const t=await K(r);if(t.code){f.error(t.msg);return}f.success(t.msg),r.content="",i.visible=!1,v.value.getData()}const k=D();function w(){var i;(i=k.value)==null||i.focus()}function B(){}return(i,t)=>{const x=l("a-avatar"),F=l("router-link"),y=l("a-typography-text"),b=l("a-button"),I=l("a-textarea"),A=l("a-trigger");return p(),d("div",M,[n(z,{ref_key:"commentListRef",ref:v,type:1},{default:a(({item:e})=>[o("div",L,[n(x,{onClick:s=>c(C)(e.userID),"image-url":e.userAvatar},null,8,["onClick","image-url"])]),o("div",S,[o("div",H,[o("span",{class:"nick",onClick:s=>c(C)(e.userID)},u(e.userNickname),9,O),e.isMe?m("",!0):(p(),d("span",j,[n(T,{options:c(U),value:e.relation},null,8,["options","value"])])),e.articleCover?m("",!0):(p(),d("span",q,[t[1]||(t[1]=_(" \u8BC4\u8BBA\u4E86\u6587\u7AE0\uFF1A ")),n(F,{to:{name:"articleDetail",params:{id:e.articleID}}},{default:a(()=>[_(u(e.articleTitle),1)]),_:2},1032,["to"])]))]),o("div",G,[n(y,{ellipsis:{rows:2,css:!0}},{default:a(()=>[_(u(e.content),1)]),_:2},1024)]),o("div",J,[o("span",P,u(c(N)(e.createdAt)),1),o("span",Q,[t[2]||(t[2]=o("i",{title:"\u70B9\u8D5E",class:"iconfont icon-dianzanliang"},null,-1)),o("span",null,u(e.diggCount),1)]),n(A,{"popup-visible":e.visible,"onUpdate:popupVisible":s=>e.visible=s,onShow:w,onHide:B,trigger:"click","content-class":"apply_comment_trigger","unmount-on-close":!1},{content:a(()=>[n(b,{type:"primary",size:"mini",onClick:s=>g(e)},{default:a(()=>t[4]||(t[4]=[_("\u56DE\u590D")])),_:2},1032,["onClick"]),n(I,{ref_key:"textareaRef",ref:k,"auto-size":{minRows:3},placeholder:"\u8BF7\u8F93\u5165\u56DE\u590D\u7684\u5185\u5BB9",onKeydown:$(s=>g(e),["enter"]),modelValue:r.content,"onUpdate:modelValue":t[0]||(t[0]=s=>r.content=s)},null,8,["onKeydown","modelValue"])]),default:a(()=>[n(R,{class:"apply"},{default:a(()=>t[3]||(t[3]=[_("\u56DE\u590D")])),_:1})]),_:2},1032,["popup-visible","onUpdate:popupVisible"])])]),e.articleCover?(p(),d("div",W,[o("img",{onClick:s=>c(h)(e.articleID),src:e.articleCover,alt:""},null,8,X),o("span",null,[n(y,{onClick:s=>c(h)(e.articleID),ellipsis:{rows:1,css:!0}},{default:a(()=>[_("\u6587\u7AE0\uFF1A"+u(e.articleTitle),1)]),_:2},1032,["onClick"])])])):m("",!0)]),_:1},512)])}}});export{ie as default};
