import{d as B,a as h,r as p,o as i,e as r,f as l,w as _,M as v,F as y,g as k,c as F,h as c,u as z,i as w,t as C,a2 as L,m as D}from"./index.b57f2f57.js";import{_ as M}from"./f_card.vue_vue_type_style_index_0_lang.65e304e8.js";import{_ as N}from"./f_user.vue_vue_type_style_index_0_lang.5c31c141.js";import{c as V,d as $}from"./article_api.d25b0d15.js";import{b as A}from"./date.5a421098.js";import{a as H}from"./go_router.d8eedbce.js";const I={class:"user_center_history_view"},O={class:"article_list"},T=["onClick"],E={class:"cover"},R=["src"],S={class:"info"},U={class:"title"},j={class:"user"},q={class:"action"},G={key:0,class:"page"},Z=B({__name:"history",setup(J){const a=h({list:[],count:0}),d=h({type:1,limit:10});async function f(){const o=await V(d);if(o.code){v.error(o.msg);return}a.count=o.data.count,a.list=[];const t={};for(const e of o.data.list){const s=A(e.lookDate);t[s]?t[s].push(e):t[s]=[e]}for(const e in t){const s=t[e];a.list.push({date:e,articleList:s})}a.list.sort((e,s)=>{const u=new Date(e.date).valueOf();return new Date(s.date).valueOf()-u})}async function b(o){const t=await $([o.articleID]);if(t.code){v.error(t.msg);return}v.success(t.msg),f()}return f(),(o,t)=>{const e=p("a-button"),s=p("a-timeline-item"),u=p("a-timeline"),g=p("a-pagination");return i(),r("div",I,[l(M,{title:"\u8DB3\u8FF9"},{default:_(()=>[l(u,null,{default:_(()=>[(i(!0),r(y,null,k(a.list,m=>(i(),F(s,{lineType:"dashed"},{label:_(()=>[c("div",O,[(i(!0),r(y,null,k(m.articleList,n=>(i(),r("div",{class:"item",onClick:x=>z(H)(n.articleID)},[c("div",E,[n.cover?(i(),r("img",{key:0,src:n.cover,alt:""},null,8,R)):w("",!0)]),c("div",S,[c("div",U,C(n.title),1),c("div",j,[l(N,{size:30,nickname:n.nickname,avatar:n.avatar},null,8,["nickname","avatar"])])]),c("div",q,[l(e,{type:"primary",onClick:L(x=>b(n),["stop"]),status:"danger",size:"mini"},{default:_(()=>t[1]||(t[1]=[D("\u5220\u9664")])),_:2},1032,["onClick"])])],8,T))),256))])]),default:_(()=>[D(C(m.date)+" ",1)]),_:2},1024))),256))]),_:1}),a.count>0?(i(),r("div",G,[l(g,{onChange:f,current:d.page,"onUpdate:current":t[0]||(t[0]=m=>d.page=m),"page-size":d.limit,total:a.count,"show-total":""},null,8,["current","page-size","total"])])):w("",!0)]),_:1})])}}});export{Z as default};
