import{d as z,q as K,a as x,r as i,o as n,e as d,h as e,f as o,w as a,l as U,n as w,F,g as h,i as f,M as b,u as c,m as l,t as m,a3 as j,a4 as q,c as k,a5 as O,p as R,a6 as G}from"./index.b57f2f57.js";import{F as D}from"./f_a.a86d598e.js";import{e as H,f as J}from"./article_api.d25b0d15.js";import{d as P}from"./date.5a421098.js";import{a as S}from"./go_router.d8eedbce.js";import"./_plugin-vue_export-helper.cdc0426e.js";const Q={class:"platform_article_view"},W={class:"head"},X={class:"left"},Y={class:"right"},Z={class:"body scrollbar"},tt={class:"menu"},st={class:"article_list"},et={class:"item"},ot={class:"cover"},at=["onClick","src"],nt={key:0,class:"user_top"},lt={class:"info"},ut=["onClick"],rt={class:"abs"},it={class:"data"},dt={class:"look"},ct={class:"comment"},_t={class:"tags"},pt={class:"date"},mt={class:"more"},vt={key:0,class:"page"},ft={key:1,class:"no_data"},Ft=z({__name:"platform_article",setup(gt){const B=K(),g=x({list:[],count:0}),u=x({type:2,status:3,limit:10});async function v(){const r=await H(u);if(r.code){b.error(r.msg);return}Object.assign(g,r.data)}function E(r){u.status=r,v()}v();async function V(r,t){const y=t;if(y==="platformArticleEdit"){R.push({name:y,params:{id:r}});return}let _={code:0,msg:"",data:""};if(y==="delete"?_=await J(r):_=await G({type:1,articleID:r}),_.code){b.error(_.msg);return}b.success(_.msg),v()}return(r,t)=>{const y=i("a-button"),_=i("router-link"),I=i("a-input-search"),C=i("a-tag"),T=i("a-typography-text"),L=i("a-overflow-list"),A=i("a-doption"),$=i("a-dropdown"),M=i("a-pagination"),N=i("a-empty");return n(),d("div",Q,[e("div",W,[e("div",X,[t[6]||(t[6]=e("div",{class:"title"},"\u6211\u7684\u6587\u7AE0",-1)),o(_,{to:{name:"platformArticleAdd"}},{default:a(()=>[o(y,{disabled:c(B).siteInfo.siteInfo.mode===2&&!c(B).isAdmin,type:"primary"},{default:a(()=>t[5]||(t[5]=[l("\u53D1\u5E03\u6587\u7AE0")])),_:1},8,["disabled"])]),_:1})]),e("div",Y,[o(I,{onSearch:v,onKeydown:U(v,["enter"]),modelValue:u.key,"onUpdate:modelValue":t[0]||(t[0]=s=>u.key=s),placeholder:"\u641C\u7D22\u6587\u7AE0"},null,8,["modelValue"])])]),e("div",Z,[e("div",tt,[o(D,{class:w({active:u.status===3}),onClick:t[1]||(t[1]=s=>E(3))},{default:a(()=>t[7]||(t[7]=[l("\u5DF2\u53D1\u5E03")])),_:1},8,["class"]),o(D,{class:w({active:u.status===2}),onClick:t[2]||(t[2]=s=>E(2))},{default:a(()=>t[8]||(t[8]=[l("\u5BA1\u6838\u4E2D")])),_:1},8,["class"]),o(D,{class:w({active:u.status===1}),onClick:t[3]||(t[3]=s=>E(1))},{default:a(()=>t[9]||(t[9]=[l("\u8349\u7A3F\u7BB1")])),_:1},8,["class"])]),e("div",st,[(n(!0),d(F,null,h(g.list,s=>(n(),d("div",et,[e("div",ot,[s.cover?(n(),d("img",{key:0,onClick:p=>c(S)(s.id),src:s.cover,alt:""},null,8,at)):f("",!0)]),s.userTop?(n(),d("div",nt,[o(C,{color:"blue"},{default:a(()=>t[10]||(t[10]=[l("\u7528\u6237\u7F6E\u9876")])),_:1})])):f("",!0),e("div",lt,[e("div",{class:"title",onClick:p=>c(S)(s.id)},m(s.title),9,ut),e("div",rt,[o(T,{ellipsis:{rows:2,css:!0}},{default:a(()=>[l(m(s.abstract),1)]),_:2},1024)]),e("div",it,[e("div",dt,[o(c(j)),e("span",null,m(s.lookCount),1)]),e("div",ct,[o(c(q)),e("span",null,m(s.commentCount),1)]),e("div",_t,[s.tagList.length<=3?(n(!0),d(F,{key:0},h(s.tagList,p=>(n(),k(C,{class:"tag"},{default:a(()=>[l(m(p),1)]),_:2},1024))),256)):(n(),k(L,{key:1,min:5},{default:a(()=>[(n(!0),d(F,null,h(s.tagList,p=>(n(),k(C,null,{default:a(()=>[l(m(p),1)]),_:2},1024))),256))]),_:2},1024))]),e("div",pt,"\u6700\u540E\u66F4\u65B0\u4E8E"+m(c(P)(s.updatedAt)),1)]),e("div",mt,[o($,{onSelect:p=>V(s.id,p)},{content:a(()=>[s.userTop?(n(),k(A,{key:0,value:"cancelTop"},{default:a(()=>t[11]||(t[11]=[l("\u53D6\u6D88\u7F6E\u9876")])),_:1})):f("",!0),!s.userTop&&s.status===3?(n(),k(A,{key:1,value:"top"},{default:a(()=>t[12]||(t[12]=[l("\u7F6E\u9876\u6587\u7AE0")])),_:1})):f("",!0),o(A,{value:"platformArticleEdit"},{default:a(()=>t[13]||(t[13]=[l("\u7F16\u8F91\u6587\u7AE0")])),_:1}),o(A,{value:"delete",style:{color:"red"}},{default:a(()=>t[14]||(t[14]=[l("\u5220\u9664\u6587\u7AE0")])),_:1})]),default:a(()=>[o(c(O))]),_:2},1032,["onSelect"])])])]))),256)),g.count?(n(),d("div",vt,[o(M,{onChange:v,current:u.page,"onUpdate:current":t[4]||(t[4]=s=>u.page=s),"page-size":u.limit,total:g.count,"show-total":""},null,8,["current","page-size","total"])])):f("",!0),g.list.length===0?(n(),d("div",ft,[o(N)])):f("",!0)])])])}}});export{Ft as default};
